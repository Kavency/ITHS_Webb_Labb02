@page "/"
@using KayakCove.Application.Services
@using KayakCove.Domain.Entities
@inject ProductService ProductService
@inject NavigationManager Navigation
@rendermode InteractiveServer

<PageTitle>Home</PageTitle>

@if (Products is null)
{
    <p>Loading...</p>
}
else
{
    <div class="container">
        <div class="card border-2">
            <div class="card-header bg-primary">
                <div class="row">
                    <div class="col-12 text-center">
                        <h2 class="text-white">Products</h2>
                    </div>
                </div>
            </div>

            <div class="card-body">
                <button class="btn btn-success p-2" @onclick="NavigateToAddProductPage"><i class="bi bi-plus-square m-2" style="font-size: 1rem; color: white;"></i>Add product</button>
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th class="col-1">ID</th>
                            <th class="col-2">Name</th>
                            <th class="col-6">Description</th>
                            <th class="col-2">Price</th>
                            <th class="col-1">In Stock</th>
                        </tr>
                    </thead>
                    
                    <tbody>
                        @foreach (var item in Products)
                        {
                            <tr>
                                <td class="col-1">@item.Id</td>
                                <td class="col-2">@item.Name</td>
                                <td class="col-5">@item.Description</td>
                                <td class="col-1">@item.Price</td>
                                <td class="col-1">@item.IsInStock</td>
                                <td class="col-2">
                                    <div>
                                        <button class="col btn btn-primary m-1 p-1" @onclick="NavigateToEditProductPage"><i class="bi bi-pencil-square" style="font-size: 1rem; color: white;"></i></button>
                                        <button class="col btn btn-danger m-1 p-1" @onclick="NavigateToDeleteProductPage"><i class="bi bi-trash" style="font-size: 1rem; color: white;"></i></button>
                                    </div>
                                </td>
                            </tr>
                        }
                    </tbody>
                    
                </table>
            </div>
        </div>
    </div>
}
@code {
    public IEnumerable<Product> Products;

    protected override async Task OnInitializedAsync()
    {
        Products = await ProductService.GetAllProductsAsync();
    }

    private void NavigateToAddProductPage()
    {

        Navigation.NavigateTo("/AddProduct");
    }

    private void NavigateToEditProductPage()
    {
        Navigation.NavigateTo("/EditProduct");

    }

    private void NavigateToDeleteProductPage()
    {
        Navigation.NavigateTo("/DeleteProduct");
    }

}
